{% extends 'base.html' %}
{% load staticfiles	 %}

{% block extra_head %}
	<title>Create Issue</title>
	<link rel="stylesheet" type="text/css" href="{% static 'css/home/issue/create.css' %}">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
	<script type="text/javascript">
		var address;
		if (navigator.geolocation) {
			navigator.geolocation.getCurrentPosition(function(position){
				$.getJSON('https://nominatim.openstreetmap.org/reverse?format=json&lat=' + position.coords.latitude +'&lon=' + position.coords.longitude +'&zoom=14&addressdetails=1',
					function(addr) {
						address = addr.address;
						document.getElementById('location').innerHTML = 'Location: ' + address.locality + ', ' + address.city + ', ' + address.state + '-' + address.postcode + ', ' + address.country;
						if (address.city=="Sylhet") {
							document.getElementById('local-issues').style.display = 'block'
						}
					}
					);
			});
		}

		function checkLocation() {
			if (typeof address.city == 'undefined') {
				document.getElementById('error-message').innerHTML = "<h3>Sorry! Couldn't get your location data!</h3>"
				document.getElementById('error-message').style.display = 'block';
			} else if (address.city=="Sylhet") {
				window.location.href = "/";
			} else {
				document.getElementById('error-message').style.display = 'block';
			}
		}
	</script>
{% endblock %}



{% block extra_body %}
	<div class="container">

		<div id="error-message" style="height: 100%; width: 100%; color: red; margin-bottom: 30px; display: none;"> <h3>This service isn't available outside Sylhet</h3> </div> 	
		<form>
		  	<div class="form-group">
		    	<label for="issue-title">Issue Title</label>
		    	<input type="text" class="form-control" id="issue-title" placeholder="What's the problem?">
		    	<small id="emailHelp" class="form-text text-muted">Please check local issues before posting one.</small>
		  	</div>
		  	<div class="form-group">
		    	<label for="issue-details">Issue Details</label>
		    	<textarea class="form-control" id="issue-details" placeholder="Say something about your issue..."></textarea>
		  	</div>
		  	<p id="location">Location: Data is loading.</p>
		  	<a href="#" class="btn btn-primary" onclick="checkLocation();">Submit</a>
		</form>
	</div>

	<div class="container local-issues" id="local-issues" style="display: none;">
		<h3>Local Issues</h3>
		<div class="row">
			<div class="issue-card col-md-6">
				<h3 class="issue-title">Bridge Vainga Gese</h3>
				<small class="issue-data"><i class="fas fa-user"></i> Akkas Ali <i class="fas fa-calendar-alt"></i>  1 April, 2019 <i class="fas fa-map-marker-alt"></i> State of Noakhali</small>
				<p class="issue-details">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
				tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
				quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
				consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
				cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
				proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
				<a href="#" class="issue-see-more btn btn-info btn-sm">See More</a>
				<div class="row issue-interract-buttons">
					<button class="col btn btn-info"><i class="fas fa-heart"></i> Upvote (1.2M)</button>
					<button class="col btn btn-info"><i class="fas fa-comment-alt"></i> Comment (23k)</button>
				</div>
			</div>

			<div class="issue-card col-md-6">
				<h3 class="issue-title">Bridge Vainga Gese</h3>
				<small class="issue-data"><i class="fas fa-user"></i> Akkas Ali <i class="fas fa-calendar-alt"></i>  1 April, 2019 <i class="fas fa-map-marker-alt"></i> State of Noakhali</small>
				<p class="issue-details">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
				tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
				quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
				consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
				cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
				proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
				<a href="#" class="issue-see-more btn btn-info btn-sm">See More</a>
				<div class="row issue-interract-buttons">
					<button class="col btn btn-info"><i class="fas fa-heart"></i> Upvote (1.2M)</button>
					<button class="col btn btn-info"><i class="fas fa-comment-alt"></i> Comment (23k)</button>
				</div>
			</div>
		</div>
	</div>

{% endblock %}



{% block extra_script %}

{% endblock %}